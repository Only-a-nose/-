| 这个作业属于哪个课程 |      https://edu.cnblogs.com/campus/gdgy/CSGrade22-34/       |
| :------------------: | :----------------------------------------------------------: |
|  这个作业要求在哪里  | [结对项目 - 作业 - 计科22级34班 - 班级博客 - 博客园 (cnblogs.com)](https://edu.cnblogs.com/campus/gdgy/CSGrade22-34/homework/13230) |
|    这个作业的目标    |  结对项目——**实现一个自动生成小学四则运算题目的命令行程序**  |
|        成员1         |                    **陈奕奕 3222004552**                     |
|        成员2         |                            林闰埼                            |

## 1. PSP2.1表格

| *PSP2.1*                                | *Personal Software Process Stages*      | **预估耗时（分钟）** | **实际耗时（分钟）** |
| --------------------------------------- | --------------------------------------- | -------------------- | -------------------- |
| Planning                                | 计划                                    |                      |                      |
| · Estimate                              | · 估计这个任务需要多少时间              |                      |                      |
| Development                             | 开发                                    |                      |                      |
| · Analysis                              | · 需求分析 (包括学习新技术)             |                      |                      |
| · Design Spec                           | · 生成设计文档                          |                      |                      |
| · Design Review                         | · 设计复审 (和同事审核设计文档)         |                      |                      |
| · Coding Standard                       | · 代码规范 (为目前的开发制定合适的规范) |                      |                      |
| · Design                                | · 具体设计                              |                      |                      |
| · Coding                                | · 具体编码                              |                      |                      |
| · Code Review                           | · 代码复审                              |                      |                      |
| · Test                                  | · 测试（自我测试，修改代码，提交修改）  |                      |                      |
| Reporting                               | 报告                                    |                      |                      |
| · Test Report                           | · 测试报告                              |                      |                      |
| · Size Measurement                      | · 计算工作量                            |                      |                      |
| · Postmortem & Process Improvement Plan | · 事后总结, 并提出过程改进计划          |                      |                      |
| 合计                                    |                                         |                      |                      |

 

## 2.性能分析



## 3.设计实现过程

#### 1. **程序概述**

本程序旨在生成小学四则运算题目，并且支持对用户的答案文件进行批改。程序通过命令行参数控制生成题目的数量、数值范围，以及判定答案的功能。生成的题目和答案分别存储在 `Exercises.txt` 和 `Answers.txt` 文件中，判定结果保存在 `Grade.txt` 文件中。

#### 2. **代码组织结构**

程序主要由四个功能模块组成：
1. **生成题目**：生成符合条件的四则运算表达式。
2. **计算答案**：计算生成题目的答案。
3. **判定对错**：根据用户提供的答案文件与程序计算的答案进行比较，输出批改结果。
4. **命令行参数解析**：解析用户通过命令行输入的参数，调用不同的功能。

#### 3. **关键函数设计**

1. **`generate_question(range_value, operator_count=3)`**
   - 功能：根据给定数值范围 `range_value` 生成四则运算题目。
   - 输入：数值范围 `range_value` 和运算符个数 `operator_count`。
   - 输出：返回一个运算表达式，包含自然数或真分数，以及最多 3 个运算符。
   - 逻辑：
     1. 随机生成自然数或真分数作为操作数。
     2. 随机选择运算符。
     3. 拼接操作数和运算符，生成一个完整的四则运算表达式。

2. **`calculate_answer(expression)`**
   - 功能：根据生成的表达式计算答案。
   - 输入：四则运算表达式 `expression`。
   - 输出：返回计算结果的真分数格式，或者在除零时返回 "undefined"。
   - 逻辑：
     1. 使用 Python 的 `eval()` 计算表达式。
     2. 捕捉除零异常，并输出 "undefined"。

3. **`check_answers(exercise_file, answer_file)`**
   - 功能：检查用户提供的答案文件，判定每道题目对错。
   - 输入：题目文件路径 `exercise_file` 和答案文件路径 `answer_file`。
   - 输出：生成一个包含判定结果的 `Grade.txt` 文件。
   - 逻辑：
     1. 读取题目和答案文件，按行处理。
     2. 逐行比较程序计算的答案和用户提供的答案，统计正确与错误的题目。
     3. 将结果写入 `Grade.txt`。

4. **`generate_exercises_and_answers(n, range_value)`**
   - 功能：生成 `n` 道题目并计算答案，存入 `Exercises.txt` 和 `Answers.txt` 文件。
   - 输入：题目个数 `n` 和数值范围 `range_value`。
   - 输出：生成的题目和答案分别存入两个文件中。

5. **`main()`**
   - 功能：命令行解析，控制程序的整体逻辑。
   - 逻辑：
     1. 如果传入 `-n` 和 `-r` 参数，生成指定数量的题目和答案。
     2. 如果传入 `-e` 和 `-a` 参数，进行答案对错判定。
     3. 如果参数不全，打印帮助信息。

#### 4. **模块之间的关系**

- **生成题目模块**（`generate_question()`）会调用生成随机数和运算符，最终返回一个四则运算表达式。
- **计算答案模块**（`calculate_answer()`）会对生成的四则运算表达式进行计算，并将结果以真分数的形式返回。
- **判定对错模块**（`check_answers()`）读取生成的题目和用户提供的答案进行比较，统计对错并输出到文件。
- **命令行解析模块**（`main()`）控制程序的主流程，解析参数决定调用生成题目或判定答案的功能。

#### 5. **关键流程图**

##### 1. **`generate_question()` 函数流程图**
![generate_question()流程图](C:\Users\陈奕奕\Desktop\generate_question()流程图.png)

##### 2. **`calculate_answer()` 函数流程图**
![calculate_answer()函数流程图](C:\Users\陈奕奕\Desktop\calculate_answer()函数流程图.png)

##### 3. **`check_answers()` 函数流程图**
![check_answers()流程图](C:\Users\陈奕奕\Desktop\check_answers()流程图.png)

#### 6. **总结与改进**
- 该程序的设计简洁，使用了模块化设计，方便各个功能的扩展。
- 使用命令行参数控制生成题目和判定答案功能，使得程序灵活性较强。
- 在未来的改进中，可以增加更多的输入校验功能，如防止用户输入无效参数，或者确保用户提供的答案文件格式正确。

## 4.代码说明

1. #### **命令行参数**：

   - `-n`: 生成题目的个数。
   - `-r`: 控制题目中数值的范围（包括真分数的分母）。
   - `-e`: 题目文件路径，用于检查答案的正确性。
   - `-a`: 答案文件路径。

2. #### **功能模块**：

   - `generate_question(range_value, operator_count)`：生成一条包含自然数或真分数的四则运算题目，最多包含三个运算符。
   - `calculate_answer(expression)`：计算题目的答案，使用Python的 `eval` 函数执行四则运算，返回简化后的分数。
   - `generate_exercises_and_answers(n, range_value)`：生成 `n` 道题目并存入 `Exercises.txt`，同时将答案存入 `Answers.txt`。
   - `check_answers(exercise_file, answer_file)`：检查给定答案文件中的答案，并统计对错结果，输出到 `Grade.txt`。

## 5.测试运行

1. ##### **生成10道题目，数值范围在10以内**：

   ```
   python MyApp.py -n 10 -r 10
   ```

2. ##### **检查题目和答案文件的对错**： 

   ```
   python MyApp.py -e Exercises.txt -a Answers.txt
   ```

3. ##### 命令窗口：

   ![image-20240918231319009](C:\Users\陈奕奕\Desktop\image-20240918231319009.png)![image-20240918230859997](C:\Users\陈奕奕\AppData\Roaming\Typora\typora-user-images\image-20240918230859997.png)

4. ##### 运行结果：

   - ######  Exercises.txt

   ![image-20240918231753842](C:\Users\陈奕奕\Desktop\exercise)

   - ###### Answers.txt

   ![image-20240918231916937](C:\Users\陈奕奕\AppData\Roaming\Typora\typora-user-images\image-20240918231916937.png)

   - ###### Grade.txt

   ![image-20240918231951936](C:\Users\陈奕奕\AppData\Roaming\Typora\typora-user-images\image-20240918231951936.png)

## 6.项目小结



